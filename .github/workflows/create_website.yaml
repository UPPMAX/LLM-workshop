name: Create website

on:
  push:
    branches:
      - main
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v2
        with:
          python-version: 3.x

      - name: Install dependencies
        run: |
          pip install -r requirements.txt natsort
          #sudo apt-get update
          sudo apt-get install -y pandoc

      - name: Build slides
        run: |
          # Set-up revealjs
          DOC_ROOT="docs"
          SITE_ROOT="/LLM-workshop"
          for f in "${DOC_ROOT}/day1/introduction.md"; do
            pandoc "${f}" -o "${f%.md}-slides.html"\
              -f markdown-implicit_figures \
              --standalone \
              --slide-level=3 \
              -t revealjs \
              -V "revealjs-url=https://cdn.jsdelivr.net/npm/reveal.js@5.2.1" \
              -V "theme=white" \
              --css "${SITE_ROOT}/stylesheets/slides.css"
          done
      - name: Deploy website
        run: mkdocs gh-deploy --force
